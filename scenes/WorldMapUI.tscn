# 1. Create a new Control scene called WorldMapUI
# 2. Add a GridContainer as a child, name it MapGrid
# 3. Add a Button called "Simulate Year" below it
# 
# Attach this script to the root node:

extends Control

@onready var map_grid = $MapGrid
@onready var sim_manager = preload("res://scripts/SimulationManager.gd").new()
@onready var tile_scene = preload("res://scenes/TileNode.tscn")

func _ready():
    generate_map()

func generate_map():
    for x in 10:
        for y in 10:
            var tile_data = TileData.new()
            tile_data.position = Vector2(x, y)
            var plant = SpeciesData.new()
            tile_data.species_present.append(plant)
            sim_manager.tile_map.append(tile_data)

            var tile = tile_scene.instantiate()
            tile.tile_data = tile_data
            map_grid.add_child(tile)

func _on_simulate_pressed():
    sim_manager.simulate_year()
    GameManager.year += 1
    print("Simulated year:", GameManager.year)
